---
layout: post
title: Hardhat摸索入門
categories: Hardhat
description: Hardhat框架
keywords: JavaScript，Ethers.js，Hardhat
---
# Hardhat
## 创建npm空项目
>npm init -y

## 安裝Hardhat

>npm install --save-dev hardhat

## 创建工程
>npx hardhat
选择创建高级ts项目
![Hardhat](/images/Hardhat/2023.02.06/1675680390181.png)
提示我要安装依赖包
>npm install --save-dev "hardhat@^2.12.6" "@nomicfoundation/hardhat-toolbox@^2.0.0"
安装需要的依赖包
>npm install @openzeppelin/contracts
>npm install dotenv

## 编译合约
测试编译代码
>npx hardhat compile

![项目目录](/images/Hardhat/2023.02.06/b92029e620bf7309fe2cecded0ece41.png)

##修改代码
修改contracts下的代碼
```
// SPDX-License-Identifier: MIT
pragma solidity ^0.8.9;
import "@openzeppelin/contracts/token/ERC20/ERC20.sol";
import  "hardhat/console.sol";


contract Mytoken is ERC20 {
    
    constructor() ERC20("Mytoken","mtk"){
        _mint(msg.sender, 1000);
    }
}

```

## 修改部署脚本
修改scripts下的脚本
``` JavaScript
const hre = require("hardhat");

async function main() {
  const Mytoken = await hre.ethers.getContractFactory("Mytoken");
  const myToken = await Mytoken.deploy();

  await myToken.deployed();

  console.log("Mytoken deployed to:",myToken.address);
}

main();
```
运行看看是否成功
>npx hardhat run .\scripts\deploy.js

##创建点 .env
放入私钥和网络
```
# Your Private key
PRIVKEY="0xac90c0003adbdcc86524fd6d925a514ba1edc1496793d922b45a152e0f2e280"
# Hosted Aggregator Node(JSON-RPC Endpoint)
# L2 provider is arbitrum
RINKEBY_ARBITRUM1="https://rinkeby.arbitrum.io/rpc"
# L2 provider is alchemy
RINKEBY_ARBITRUM2="https://arb-rinkeby.g.alchemy.com/v2/aP08yElpUn8ZcQoPTPHBWO1S0leNJqRh"
# L1 provider is alchemy
RINKEBY_ALCHEMY="https://eth-rinkeby.alchemyapi.io/v2/n2Esy5er-xTIoSekoV4dIwXNC6YWIDkQ"
# L1 provider is alchemy 
ROPSTENALCHEMY="https://eth-ropsten.alchemyapi.io/v2/Ig8n6sbXEFEpamOJBsM8BK98vXkeEmxb"
```

## 修改hardhat.config.js
修改配置文件
```
require("@nomiclabs/hardhat-ethers");
require("@nomiclabs/hardhat-waffle");
require('dotenv').config();
/** @type import('hardhat/config').HardhatUserConfig */
module.exports = {
  solidity: "0.8.17",

  networks:{
    arditrum1:{
      url:process.env.RINKEBY_ARBITRUM1,
      accounts:[process.env.PRIVKEY]
    },
    arditrum2:{
      url:process.env.RINKEBY_ARBITRUM2,
      accounts:[process.env.PRIVKEY]
    },
    rinkeby:{
      url:process.env.RINKEBY_ALCHEMY,
      accounts:[process.env.PRIVKEY]
    },
    ropsten:{
      url:process.env.ROPSTENALCHEMY,
      accounts:[process.env.PRIVKEY]
    }
  }
};

```
